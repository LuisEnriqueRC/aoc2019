<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Día 1</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>

    <body>
        <div>
            <h2>Día 1</h2>
        </div>

        <div>
            <input id='file1' type='file' accept='text/plain' onchange='openFile(event)'><br>
        </div>

        <script type="text/javascript">

            // 3401852
            // 5099916
            let openFile = function(event) {
                let input = event.target;

                let reader = new FileReader();
                reader.onload = function(){
                    let text = reader.result;
                    proceso(text);
                };
                reader.readAsText(input.files[0]);
            };
            

            function proceso(texto) {
                let rows = texto.split('\n');
                // rows = [1969];
                let totalFuel = 0;
                for (let mass of rows) {
                    console.log(mass);
                    mass = parseInt(mass);
                    let fuel = getFuel(mass);
                    let fuelParaFuel = fuel;
                    fuelParaFuel += fuelForFuel(fuel);
                    // console.log('fuel para el fuel', fuelParaFuel);
                    // totalFuel += fuel;
                    totalFuel += fuelParaFuel;
                }
                console.log(totalFuel);
            }

            function fuelForFuel(fuelMass) {
                let fuelExtra = 0;
                if (fuelMass >= 6) {
                    fuelExtra = getFuel(fuelMass);
                    fuelExtra += fuelForFuel(fuelExtra);
                }
                return fuelExtra;
            }

            function getFuel(masa) {
                return parseInt(masa / 3) - 2;
            }



        </script>
    </body>
</html>